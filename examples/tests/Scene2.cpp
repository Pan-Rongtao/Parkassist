#include "catch2/catch.hpp"
#include "Window.h"
#include "Converter.h"
#include "parkassist/gles/fwd.h"

using namespace nb;

using StateMachinePtr = std::shared_ptr<StateMachine>;
class MyStateMachine
{
public:
	static StateMachinePtr getStateMachine()
	{
		static StateMachinePtr stateMachine;
		if (stateMachine)	return stateMachine;

		//State0
		auto state0 = std::make_shared<State>();
		{
			auto polygon0 = std::make_shared<Polygon>();
			std::vector<double> side0Array0 = { 36.795055, 410.287628, 39.737698, 401.481445, 42.672306, 392.799042, 45.596325, 384.243286, 48.507435, 375.816498, 51.403419, 367.520721, 54.282181, 359.357513, 57.141811, 351.328400, 59.980476, 343.434296, 62.796513, 335.675964, 65.588356, 328.053925, 68.354622, 320.568298, 71.094017, 313.219055, 73.805351, 306.006012, 76.487541, 298.928619, 79.139656, 291.986176, 81.760811, 285.177887, 84.350296, 278.502625, 86.907425, 271.959320, 89.431625, 265.546600, 91.922417, 259.263000, 94.379410, 253.106949, 96.802284, 247.076767, 99.190765, 241.170792, 101.544693, 235.387146, 103.863930, 229.723907, 106.148430, 224.179123, 108.398193, 218.750748, 110.613266, 213.436813, 112.793739, 208.235168, 114.939735, 203.143707, 117.051460, 198.160278, 119.129112, 193.282791, 121.172974, 188.509048, 123.183296, 183.836929, 125.160400, 179.264313, 127.104675, 174.788895, 129.016373, 170.408783, 130.895966, 166.121658, 132.743820, 161.925522, 134.560318, 157.818314, 136.345947, 153.797928, 138.101105, 149.862350, 139.826263, 146.009659, 141.521851, 142.237778, 143.188354, 138.544891, 144.826248, 134.929047, 146.435959, 131.388367, 148.017975, 127.921097, 149.572845, 124.525314, 151.100952, 121.199432, 152.602814, 117.941582, 154.078888, 114.750214, 155.529678, 111.623581, 156.955643, 108.560143, 158.357224, 105.558334, 159.734909, 102.616570, 161.089142, 99.733406, 162.420380, 96.907394, 163.729095, 94.137085, 165.015686, 91.421120, 166.280609, 88.758148, 167.524323, 86.146767, 168.747192, 83.585869, 169.949692, 81.074020, 171.132202, 78.610161, 172.295120, 76.193024, 173.438843, 73.821465, 174.563797, 71.494392, 175.670319, 69.210709, 176.758820, 66.969368, 177.829636, 64.769310, 178.883163, 62.609535, 179.919693, 60.489071, 180.939651, 58.407001, 181.943314, 56.362362, 182.931046, 54.354275, 183.903168, 52.381821, 184.860016, 50.444252, 185.801849, 48.540649, 186.729019, 46.670227, 187.641830, 44.832241, 188.540543, 43.025940, 189.425430, 41.250534, 190.296799, 39.505287, 191.154968, 37.789581, 192.000137, 36.102711, 192.832581, 34.443981, 193.652527, 32.812775, 194.460312, 31.208433, 195.256088, 29.630390, 196.040146, 28.078075, 196.812698, 26.550829, 197.574036, 25.048170, 198.324249, 23.569530, 199.063675, 22.114340, 199.792480, 20.682114, 200.510864, 19.272371, 201.219009, 17.884588, 201.917175, 16.518324 };
			std::vector<double> side1Array0 = { 43.846931, 416.308716, 46.774689, 407.259186, 49.693687, 398.339386, 52.601398, 389.552246, 55.495380, 380.900421, 58.373394, 372.385773, 61.233337, 364.010254, 64.073212, 355.775238, 66.891197, 347.681793, 69.685623, 339.730530, 72.454903, 331.922119, 75.197647, 324.256531, 77.912560, 316.733734, 80.598442, 309.353455, 83.254242, 302.115021, 85.879021, 295.017700, 88.471954, 288.060486, 91.032272, 281.242340, 93.559387, 274.561829, 96.052711, 268.017548, 98.511826, 261.607819, 100.936371, 255.331055, 103.326004, 249.185349, 105.680557, 243.168930, 107.999847, 237.279617, 110.283844, 231.515442, 112.532471, 225.874237, 114.745804, 220.353912, 116.923889, 214.952179, 119.066895, 209.666824, 121.174995, 204.495560, 123.248405, 199.436127, 125.287392, 194.486237, 127.292244, 189.643539, 129.263245, 184.905777, 131.200760, 180.270706, 133.105225, 175.735855, 134.976929, 171.299240, 136.816376, 166.958389, 138.623932, 162.711151, 140.400085, 158.555374, 142.145279, 154.488846, 143.859985, 150.509445, 145.544647, 146.615067, 147.199768, 142.803650, 148.825851, 139.073196, 150.423355, 135.421677, 151.992813, 131.847153, 153.534683, 128.347717, 155.049484, 124.921432, 156.537704, 121.566582, 157.999847, 118.281296, 159.436371, 115.063850, 160.847824, 111.912453, 162.234619, 108.825569, 163.597275, 105.801498, 164.936295, 102.838654, 166.252060, 99.935455, 167.545120, 97.090462, 168.815903, 94.302139, 170.064850, 91.569084, 171.292389, 88.889946, 172.499023, 86.263260, 173.685104, 83.687813, 174.851120, 81.162201, 175.997421, 78.685280, 177.124481, 76.255783, 178.232635, 73.872566, 179.322327, 71.534409, 180.393936, 69.240211, 181.447815, 66.988914, 182.484360, 64.779434, 183.503906, 62.610764, 184.506805, 60.481884, 185.493454, 58.391838, 186.464157, 56.339657, 187.419220, 54.324471, 188.359024, 52.345268, 189.283859, 50.401344, 190.194031, 48.491737, 191.089874, 46.615662, 191.971634, 44.772327, 192.839676, 42.960941, 193.694168, 41.180759, 194.535538, 39.431042, 195.363922, 37.711082, 196.179672, 36.020226, 196.982971, 34.357769, 197.774170, 32.723011, 198.553436, 31.115385, 199.321075, 29.534231, 200.077240, 27.978979, 200.822205, 26.449015, 201.556229, 24.943815, 202.279480, 23.462721, 202.992218, 22.005339, 203.694626, 20.571009, 204.386902, 19.159338, 205.069244, 17.769758, 205.741837, 16.401785 };
			polygon0->setSide0(Converter::doublesToSide(side0Array0));
			polygon0->setSide1(Converter::doublesToSide(side1Array0));
			polygon0->setBrush(std::make_shared<SolidColorBrush>(Color(234, 178, 0, 255)));

			auto polygon1 = std::make_shared<Polygon>();
			std::vector<double> side0Array1 = { 63.877365, 432.276703, 66.408684, 423.664246, 68.931992, 415.166443, 71.445412, 406.785736, 73.947174, 398.524353, 76.435600, 390.383911, 78.909096, 382.365936, 81.366180, 374.471924, 83.805534, 366.702728, 86.225807, 359.059021, 88.625870, 351.541412, 91.004601, 344.150085, 93.361015, 336.885254, 95.694176, 329.746765, 98.003235, 322.734192, 100.287468, 315.847076, 102.546227, 309.084900, 104.778831, 302.446716, 106.984833, 295.931702, 109.163742, 289.538727, 111.315170, 283.266602, 113.438759, 277.114136, 115.534264, 271.079926, 117.601448, 265.162567, 119.640167, 259.360382, 121.650299, 253.671799, 123.631775, 248.095169, 125.584557, 242.628799, 127.508690, 237.270981, 129.404175, 232.019806, 131.271179, 226.873520, 133.109787, 221.830231, 134.920135, 216.888092, 136.702438, 212.045181, 138.456848, 207.299652, 140.183655, 202.649582, 141.883087, 198.093048, 143.555435, 193.628204, 145.200897, 189.253204, 146.819901, 184.966003, 148.412674, 180.764908, 149.979568, 176.648010, 151.520935, 172.613525, 153.037079, 168.659576, 154.528412, 164.784409, 155.995239, 160.986313, 157.437988, 157.263489, 158.856995, 153.614288, 160.252594, 150.037048, 161.625259, 146.529999, 162.975250, 143.091690, 164.303040, 139.720413, 165.608978, 136.414658, 166.893387, 133.172882, 168.156754, 129.993561, 169.399338, 126.875389, 170.621552, 123.816734, 171.823807, 120.816284, 173.006409, 117.872726, 174.169769, 114.984558, 175.314224, 112.150703, 176.440109, 109.369698, 177.547791, 106.640373, 178.637619, 103.961487, 179.709961, 101.331871, 180.765060, 98.750374, 181.803345, 96.215866, 182.825119, 93.727242, 183.830643, 91.283417, 184.820313, 88.883324, 185.794357, 86.526016, 186.753174, 84.210381, 187.696991, 81.935600, 188.626129, 79.700653, 189.540833, 77.504539, 190.441452, 75.346519, 191.328232, 73.225616, 192.201447, 71.141045, 193.061340, 69.091896, 193.908203, 67.077454, 194.742233, 65.096886, 195.563782, 63.149414, 196.373016, 61.234329, 197.170227, 59.350891, 197.955582, 57.498352, 198.729355, 55.676140, 199.491791, 53.883427, 200.243073, 52.119682, 200.983459, 50.384251, 201.713074, 48.676434, 202.432236, 46.995743, 203.141068, 45.341526, 203.839813, 43.713211, 204.528610, 42.110229, 205.207718, 40.532101, 205.877228, 38.978252, 206.537415, 37.448154, 207.188446, 35.941292, 207.830444, 34.457260, 208.463623, 32.995495};
			std::vector<double> side1Array1 = { 98.031410, 455.869904, 100.375809, 446.343719, 102.710464, 436.953735, 105.033516, 427.703125, 107.343079, 418.594604, 109.637520, 409.630127, 111.915245, 400.811676, 114.174751, 392.140656, 116.414711, 383.618225, 118.633858, 375.245148, 120.831078, 367.021790, 123.005280, 358.948486, 125.155579, 351.025024, 127.281097, 343.251007, 129.381042, 335.625885, 131.454819, 328.148865, 133.501801, 320.818909, 135.521500, 313.634705, 137.513458, 306.595001, 139.477371, 299.698151, 141.412933, 292.942444, 143.319931, 286.326172, 145.198196, 279.847290, 147.047607, 273.503998, 148.868164, 267.293945, 150.659882, 261.215118, 152.422760, 255.265137, 154.156906, 249.441742, 155.862457, 243.742737, 157.539581, 238.165573, 159.188492, 232.707870, 160.809418, 227.367340, 162.402603, 222.141449, 163.968338, 217.027817, 165.506912, 212.024048, 167.018677, 207.127670, 168.503952, 202.336304, 169.963104, 197.647537, 171.396484, 193.059143, 172.804489, 188.568604, 174.187500, 184.173798, 175.545914, 179.872299, 176.880127, 175.661972, 178.190536, 171.540558, 179.477615, 167.505890, 180.741669, 163.555939, 181.983185, 159.688477, 183.202591, 155.901566, 184.400223, 152.193237, 185.576599, 148.561356, 186.732010, 145.004242, 187.866959, 141.519836, 188.981781, 138.106384, 190.076935, 134.762146, 191.152786, 131.485260, 192.209686, 128.274170, 193.248108, 125.127121, 194.268387, 122.042519, 195.270859, 119.018883, 196.255951, 116.054504, 197.223984, 113.148018, 198.175354, 110.297943, 199.110382, 107.502869, 200.029434, 104.761444, 200.932846, 102.072220, 201.820923, 99.434059, 202.693985, 96.845596, 203.552383, 94.305603, 204.396454, 91.812904, 205.226440, 89.366272, 206.042664, 86.964691, 206.845444, 84.606941, 207.634979, 82.292053, 208.411652, 80.018936, 209.175720, 77.786537, 209.927399, 75.593971, 210.666962, 73.440201, 211.394699, 71.324295, 212.110870, 69.245422, 212.815643, 67.202667, 213.509323, 65.195198, 214.192139, 63.222126, 214.864304, 61.282673, 215.526031, 59.376049, 216.177536, 57.501549, 216.819061, 55.658390, 217.450745, 53.845821, 218.072922, 52.063187, 218.685623, 50.309742, 219.289185, 48.584919, 219.883652, 46.888058, 220.469345, 45.218456, 221.046356, 43.575546, 221.614929, 41.958717, 222.175201, 40.367435, 222.727310, 38.801140, 223.271423, 37.259212, 223.807755, 35.741215, 224.336380, 34.246532, 224.857513, 32.774731};
			polygon1->setSide0(Converter::doublesToSide(side0Array1));
			polygon1->setSide1(Converter::doublesToSide(side1Array1));
			polygon1->setBrush(std::make_shared<SolidColorBrush>(Color(234, 178, 0, 255)));

			auto polygon2 = std::make_shared<Polygon>();
			std::vector<double> side0Array2 = { 511.904724, 446.668915, 509.515594, 437.712494, 507.131409, 428.876862, 504.754059, 420.164368, 502.385468, 411.577606, 500.027435, 403.118347, 497.681580, 394.788513, 495.349487, 386.589264, 493.032623, 378.521667, 490.732330, 370.586700, 488.449921, 362.784729, 486.186493, 355.116058, 483.943146, 347.580902, 481.720886, 340.178986, 479.520599, 332.910034, 477.343048, 325.773346, 475.189087, 318.768433, 473.059265, 311.894196, 470.954193, 305.149780, 468.874420, 298.533966, 466.820313, 292.045441, 464.792297, 285.682770, 462.790741, 279.444489, 460.815796, 273.329041, 458.867737, 267.334808, 456.946716, 261.459869, 455.052826, 255.702545, 453.186127, 250.060959, 451.346619, 244.533142, 449.534302, 239.117264, 447.749084, 233.811249, 445.990906, 228.613159, 444.259644, 223.520950, 442.555145, 218.532669, 440.877197, 213.646179, 439.225616, 208.859467, 437.600189, 204.170517, 436.000702, 199.577301, 434.426849, 195.077881, 432.878296, 190.670044, 431.354889, 186.352066, 429.856171, 182.121796, 428.381927, 177.977371, 426.931793, 173.916855, 425.505432, 169.938278, 424.102570, 166.039963, 422.722717, 162.219864, 421.365662, 158.476303, 420.031006, 154.807480, 418.718323, 151.211563, 417.427399, 147.687012, 416.157715, 144.231979, 414.909027, 140.844955, 413.680878, 137.524261, 412.473022, 134.268280, 411.284973, 131.075562, 410.116486, 127.944542, 408.967194, 124.873795, 407.836670, 121.861855, 406.724579, 118.907249, 405.630676, 116.008743, 404.554504, 113.164940, 403.495819, 110.374466, 402.454224, 107.636154, 401.429413, 104.948639, 400.421112, 102.310822, 399.428955, 99.721481, 398.452606, 97.179436, 397.491821, 94.683624, 396.546234, 92.232872, 395.615540, 89.826202, 394.699524, 87.462540, 393.797852, 85.140862, 392.910248, 82.860245, 392.036469, 80.619606, 391.176178, 78.418144, 390.329163, 76.254906, 389.495148, 74.128967, 388.673889, 72.039490, 387.865082, 69.985641, 387.068542, 67.966682, 386.283966, 65.981697, 385.511200, 64.029930, 384.749969, 62.110680, 384.000061, 60.223209, 383.261200, 58.366810, 382.533264, 56.540745, 381.815948, 54.744347, 381.109100, 52.977009, 380.412537, 51.238029, 379.725983, 49.526836, 379.049347, 47.842728, 378.382355, 46.185223, 377.724854, 44.553711, 377.076630, 42.947575, 376.437561, 41.366375, 375.807434, 39.809456, 375.186096, 38.276382, 374.573364, 36.766666, 373.969086, 35.279743};
			std::vector<double> side1Array2 = { 541.840149, 424.443604, 539.340759, 416.345245, 536.844604, 408.348145, 534.353638, 400.454193, 531.869690, 392.665527, 529.394348, 384.983643, 526.929199, 377.409912, 524.475830, 369.945770, 522.035522, 362.591949, 519.609680, 355.349304, 517.199585, 348.218231, 514.806274, 341.199371, 512.430969, 334.292816, 510.074463, 327.498444, 507.737885, 320.816345, 505.421936, 314.246124, 503.127502, 307.787292, 500.855194, 301.439545, 498.605682, 295.201965, 496.379608, 289.073975, 494.177368, 283.054565, 491.999512, 277.142822, 489.846405, 271.337738, 487.718353, 265.638123, 485.615753, 260.042786, 483.538727, 254.550476, 481.487579, 249.159836, 479.462402, 243.869659, 477.463348, 238.678314, 475.490479, 233.584488, 473.543884, 228.586594, 471.623474, 223.683212, 469.729309, 218.872772, 467.861298, 214.153717, 466.019318, 209.524475, 464.203369, 204.983444, 462.413239, 200.529037, 460.648804, 196.159729, 458.909912, 191.873932, 457.196289, 187.669907, 455.507813, 183.546265, 453.844238, 179.501343, 452.205322, 175.533554, 450.590790, 171.641403, 449.000397, 167.823242, 447.433899, 164.077713, 445.890991, 160.403183, 444.371338, 156.798203, 442.874756, 153.261337, 441.400848, 149.791046, 439.949341, 146.386017, 438.519928, 143.044754, 437.112244, 139.765945, 435.726105, 136.548233, 434.361053, 133.390182, 433.016815, 130.290588, 431.693115, 127.248154, 430.389557, 124.261551, 429.105896, 121.329651, 427.841766, 118.451088, 426.596893, 115.624855, 425.370880, 112.849632, 424.163483, 110.124382, 422.974396, 107.447952, 421.803253, 104.819260, 420.649750, 102.237236, 419.513641, 99.700844, 418.394592, 97.209061, 417.292328, 94.760941, 416.206482, 92.355415, 415.136841, 89.991661, 414.083130, 87.668617, 413.045013, 85.385468, 412.022217, 83.141365, 411.014496, 80.935303, 410.021576, 78.766541, 409.043182, 76.634285, 408.079010, 74.537621, 407.128845, 72.475883, 406.192474, 70.448250, 405.269623, 68.454018, 404.359985, 66.492432, 403.463348, 64.562752, 402.579529, 62.664322, 401.708252, 60.796486, 400.849274, 58.958584, 400.002411, 57.149960, 399.167450, 55.369953, 398.344116, 53.618000, 397.532227, 51.893482, 396.731628, 50.195877, 395.942047, 48.524521, 395.163300, 46.878941, 394.395233, 45.258560, 393.637604, 43.662853, 392.890228, 42.091339, 392.152954, 40.543541, 391.425598, 39.018879, 390.707916, 37.516922, 389.999817, 36.037231};
			polygon2->setSide0(Converter::doublesToSide(side0Array2));
			polygon2->setSide1(Converter::doublesToSide(side1Array2));
			polygon2->setBrush(std::make_shared<SolidColorBrush>(Color(234, 178, 0, 255)));

			auto polygon3 = std::make_shared<Polygon>();
			std::vector<double> side0Array3 = { 559.372437, 409.698151, 556.521667, 401.174042, 553.674011, 392.764404, 550.831909, 384.471893, 547.997742, 376.298767, 545.173645, 368.246979, 542.361877, 360.318237, 539.564392, 352.513702, 536.782837, 344.834686, 534.019226, 337.281830, 531.274902, 329.855804, 528.551575, 322.556793, 525.850403, 315.384949, 523.172791, 308.340149, 520.519897, 301.421997, 517.892700, 294.630188, 515.292236, 287.963867, 512.719299, 281.422394, 510.174683, 275.004608, 507.659088, 268.709595, 505.173126, 262.536102, 502.717285, 256.482697, 500.292053, 250.548157, 497.897766, 244.730804, 495.534760, 239.029205, 493.203339, 233.441605, 490.903564, 227.966339, 488.635681, 222.601700, 486.399658, 217.345795, 484.195679, 212.196823, 482.023621, 207.152954, 479.883423, 202.212265, 477.775085, 197.372818, 475.698395, 192.632767, 473.653168, 187.990112, 471.639282, 183.443008, 469.656494, 178.989380, 467.704529, 174.627441, 465.783112, 170.355179, 463.891968, 166.170746, 462.030762, 162.072250, 460.199219, 158.057785, 458.396942, 154.125504, 456.623596, 150.273590, 454.878754, 146.500275, 453.162140, 142.803696, 451.473267, 139.182205, 449.811829, 135.633942, 448.177368, 132.157333, 446.569489, 128.750595, 444.987762, 125.412178, 443.431824, 122.140434, 441.901215, 118.933853, 440.395569, 115.790787, 438.914398, 112.709824, 437.457336, 109.689430, 436.023987, 106.728157, 434.613861, 103.824615, 433.226654, 100.977386, 431.861847, 98.185165, 430.519104, 95.446632, 429.198059, 92.760521, 427.898224, 90.125465, 426.619293, 87.540375, 425.360809, 85.003937, 424.122437, 82.515099, 422.903748, 80.072624, 421.704468, 77.675514, 420.524170, 75.322586, 419.362427, 73.012787, 418.218994, 70.745186, 417.093445, 68.518707, 415.985504, 66.332367, 414.894745, 64.185303, 413.820892, 62.076538, 412.763672, 60.005119, 411.722687, 57.970295, 410.697601, 55.971104, 409.688171, 54.006760, 408.694092, 52.076511, 407.715027, 50.179485, 406.750671, 48.314892, 405.800781, 46.482117, 404.865082, 44.680328, 403.943298, 42.908829, 403.035156, 41.167000, 402.140381, 39.454098, 401.258667, 37.769505, 400.389832, 36.112572, 399.533661, 34.482681, 398.689789, 32.879261, 397.858124, 31.301744, 397.038300, 29.749472, 396.230194, 28.221964, 395.433533, 26.718647, 394.648102, 25.239000, 393.873688, 23.782537, 393.110107, 22.348734, 392.357147, 20.937107, 391.614594, 19.547176};
			std::vector<double> side1Array3 = { 565.549377, 404.179169, 562.696350, 395.876923, 559.845825, 387.683990, 557.000244, 379.602905, 554.161926, 371.635773, 551.333069, 363.784454, 548.515625, 356.050568, 545.711670, 348.435364, 542.922913, 340.939911, 540.151001, 333.565002, 537.397644, 326.311218, 534.664246, 319.178833, 531.952148, 312.167969, 529.262634, 305.278656, 526.596863, 298.510498, 523.955811, 291.863190, 521.340576, 285.336182, 518.751953, 278.928741, 516.190735, 272.639862, 513.657593, 266.468750, 511.153168, 260.414185, 508.678040, 254.475006, 506.232574, 248.649948, 503.817322, 242.937607, 501.432495, 237.336548, 499.078430, 231.845291, 496.755280, 226.462189, 494.463287, 221.185638, 492.202576, 216.014023, 489.973145, 210.945602, 487.774994, 205.978622, 485.608185, 201.111343, 483.472626, 196.341980, 481.368195, 191.668762, 479.294739, 187.089828, 477.252197, 182.603470, 475.240234, 178.207703, 473.258728, 173.900894, 471.307434, 169.681137, 469.386047, 165.546631, 467.494293, 161.495651, 465.631927, 157.526413, 463.798553, 153.637161, 461.993896, 149.826111, 460.217621, 146.091614, 458.469299, 142.431992, 456.748657, 138.845505, 455.055237, 135.330597, 453.388763, 131.885590, 451.748779, 128.508881, 450.134888, 125.198952, 448.546722, 121.954201, 446.983948, 118.773224, 445.446045, 115.654480, 443.932709, 112.596527, 442.443512, 109.597961, 440.977966, 106.657379, 439.535858, 103.773422, 438.116669, 100.944778, 436.720001, 98.170135, 435.345520, 95.448212, 433.992798, 92.777786, 432.661469, 90.157593, 431.351105, 87.586571, 430.061432, 85.063416, 428.791992, 82.587151, 427.542419, 80.156517, 426.312378, 77.770584, 425.101501, 75.428215, 423.909424, 73.128403, 422.735809, 70.870148, 421.580292, 68.652512, 420.442535, 66.474548, 419.322235, 64.335327, 418.219055, 62.233883, 417.132629, 60.169430, 416.062744, 58.141140, 415.008942, 56.148041, 413.971069, 54.189434, 412.948700, 52.264534, 411.941650, 50.372547, 410.949493, 48.512688, 409.972076, 46.684254, 409.009064, 44.886585, 408.060150, 43.118896, 407.125122, 41.380619, 406.203705, 39.671001, 405.295685, 37.989483, 404.400696, 36.335396, 403.518555, 34.708134, 402.649048, 33.107124, 401.791901, 31.531755, 400.946930, 29.981543, 400.113861, 28.455875, 399.292419, 26.954269, 398.482513, 25.476156, 397.683838, 24.021051, 396.896179, 22.588474, 396.119415, 21.177944, 395.353271, 19.788977 };
			polygon3->setSide0(Converter::doublesToSide(side0Array3));
			polygon3->setSide1(Converter::doublesToSide(side1Array3));
			polygon3->setBrush(std::make_shared<SolidColorBrush>(Color(234, 178, 0, 255)));

			auto polygon4 = std::make_shared<Polygon>();
			std::vector<double> side0Array4 = { 36.795055, 410.287628, 39.843796, 412.916901, 42.958664, 415.561951, 46.141056, 418.221741, 49.392349, 420.894989, 52.714012, 423.580719, 56.107372, 426.277557, 59.573811, 428.983978, 63.114716, 431.698547, 66.731400, 434.419678, 70.425186, 437.145630, 74.197350, 439.874451, 78.049103, 442.604187, 81.981651, 445.332855, 85.996094, 448.058105, 90.093559, 450.777588, 94.274948, 453.488800, 98.541237, 456.189148, 102.893234, 458.875854, 107.331596, 461.545959, 111.857033, 464.196442, 116.469910, 466.824127, 121.170654, 469.425690, 125.959435, 471.997803, 130.836288, 474.536713, 135.801102, 477.038879, 140.853577, 479.500549, 145.993225, 481.917694, 151.219345, 484.286346, 156.531021, 486.602600, 161.927185, 488.862213, 167.406372, 491.061005, 172.967072, 493.194824, 178.607422, 495.259491, 184.325302, 497.250702, 190.118378, 499.164246, 195.984070, 500.996124, 201.919495, 502.742157, 207.921494, 504.398438, 213.986694, 505.961090, 220.111542, 507.426361, 226.292053, 508.790649, 232.524200, 510.050812, 238.803635, 511.203583, 245.125763, 512.246094, 251.485977, 513.175659, 257.879272, 513.989990, 264.300598, 514.687073, 270.744843, 515.265137, 277.206726, 515.722839, 283.680786, 516.058960, 290.161621, 516.273010, 296.643829, 516.364563, 303.121918, 516.333496, 309.590363, 516.180359, 316.043945, 515.905762, 322.477142, 515.510864, 328.884857, 514.997009, 335.261993, 514.365906, 341.603577, 513.619690, 347.904816, 512.760620, 354.161102, 511.791412, 360.368011, 510.714813, 366.521423, 509.533966, 372.617340, 508.252258, 378.652100, 506.873169, 384.622131, 505.400177, 390.524292, 503.837250, 396.355591, 502.188324, 402.113342, 500.457184, 407.795105, 498.648132, 413.398682, 496.765167, 418.922089, 494.812347, 424.363678, 492.793884, 429.722046, 490.713776, 434.995850, 488.576263, 440.184174, 486.385193, 445.286194, 484.144592, 450.301361, 481.858429, 455.229279, 479.530334, 460.069733, 477.164124, 464.822601, 474.763306, 469.488190, 472.331360, 474.066620, 469.871613, 478.558350, 467.387421, 482.963898, 464.881744, 487.283966, 462.357574, 491.519287, 459.817719, 495.670654, 457.265076, 499.739014, 454.701965, 503.725433, 452.131073, 507.630981, 449.554596, 511.456757, 446.974670, 515.203979, 444.393433, 518.873840, 441.812836, 522.467651, 439.234650, 525.986694, 436.660797, 529.432312, 434.092621, 532.805847, 431.531708, 536.108704, 428.979584, 539.342163, 426.437378, 542.507629, 423.906464, 545.606567, 421.387817, 548.640259, 418.882477, 551.610107, 416.391449, 554.517517, 413.915680, 557.363770, 411.455841, 560.150330, 409.012665, 562.878418, 406.586945, 565.549377, 404.179169 };
			std::vector<double> side1Array4 = { 34.575981, 416.997162, 37.628872, 419.707764, 40.748783, 422.435120, 43.937157, 425.178253, 47.195423, 427.936035, 50.525047, 430.707031, 53.927456, 433.490143, 57.404045, 436.283875, 60.956268, 439.086517, 64.585518, 441.896545, 68.293106, 444.712158, 72.080391, 447.531464, 75.948669, 450.352356, 79.899170, 453.172638, 83.933037, 455.990082, 88.051437, 458.802216, 92.255386, 461.606445, 96.545845, 464.400055, 100.923729, 467.180115, 105.389717, 469.943665, 109.944527, 472.687592, 114.588654, 475.408447, 119.322517, 478.102844, 124.146347, 480.767273, 129.060181, 483.397949, 134.064011, 485.991089, 139.157501, 488.542603, 144.340210, 491.048645, 149.611450, 493.504944, 154.970337, 495.907196, 160.415756, 498.251221, 165.946335, 500.532501, 171.560455, 502.746704, 177.256271, 504.889465, 183.031693, 506.956268, 188.884308, 508.942749, 194.811432, 510.844635, 200.810196, 512.657471, 206.877380, 514.377197, 213.009506, 515.999817, 219.202957, 517.521362, 225.453629, 518.937988, 231.757431, 520.246338, 238.109863, 521.443054, 244.506302, 522.524963, 250.941818, 523.489563, 257.411499, 524.334229, 263.910034, 525.056702, 270.432098, 525.655334, 276.972382, 526.128479, 283.525238, 526.475220, 290.085022, 526.694641, 296.646240, 526.786499, 303.203217, 526.750854, 309.750336, 526.587891, 316.282104, 526.298523, 322.792938, 525.883850, 329.277527, 525.345337, 335.730652, 524.684937, 342.147217, 523.904602, 348.522278, 523.007019, 354.851044, 521.994873, 361.129150, 520.871155, 367.352203, 519.639160, 373.516174, 518.302368, 379.617279, 516.864441, 385.651917, 515.329346, 391.616852, 513.700928, 397.508972, 511.983459, 403.325714, 510.180969, 409.064423, 508.297760, 414.722870, 506.338287, 420.299225, 504.306641, 425.791656, 502.207367, 431.198792, 500.044586, 436.519379, 497.822662, 441.752380, 495.545868, 446.897095, 493.218231, 451.952911, 490.843781, 456.919495, 488.426544, 461.796661, 485.970398, 466.584381, 483.479034, 471.282867, 480.955994, 475.892395, 478.404907, 480.413452, 475.829041, 484.846588, 473.231689, 489.192474, 470.615814, 493.451965, 467.984436, 497.625885, 465.340454, 501.715332, 462.686371, 505.721283, 460.024841, 509.644897, 457.358246, 513.487366, 454.688751, 517.249939, 452.018524, 520.933899, 449.349731, 524.540527, 446.684082, 528.071167, 444.023438, 531.527283, 441.369354, 534.910217, 438.723450, 538.221375, 436.087067, 541.462219, 433.461761, 544.634033, 430.848511, 547.738403, 428.248627, 550.776672, 425.663086, 553.750366, 423.092804, 556.660706, 420.538757, 559.509216, 418.001801, 562.297302, 415.482544, 565.026245, 412.981781, 567.697449, 410.499939};
			polygon4->setSide0(Converter::doublesToSide(side0Array4));
			polygon4->setSide1(Converter::doublesToSide(side1Array4));
			polygon4->setBrush(std::make_shared<SolidColorBrush>(Color(255, 0, 0, 255)));

			state0->addPolygon(polygon0);
			state0->addPolygon(polygon1);
			state0->addPolygon(polygon2);
			state0->addPolygon(polygon3);
			state0->addPolygon(polygon4);
		}

		stateMachine = std::make_shared<StateMachine>();
		stateMachine->addState(state0);
		return stateMachine;
	}

};

TEST_CASE("Test Scene2", "[Scene2]")
{
	Window w(800, 600, "Scene2");
	w.ResizeEvent += [&w](const Window::Size &sz)
	{
		DrawingContext::get()->resize(sz.width, sz.height);
		DrawingContext::get()->renderAll();
		w.swapBuffers();
	};
	w.resize(600, 540);

	w.KeyEvent += [](const int &key) 
	{
		switch (key)
		{
		case 262:	MyStateMachine::getStateMachine()->gotoState(MyStateMachine::getStateMachine()->getCurrentState() - 1);	break;
		case 263:	MyStateMachine::getStateMachine()->gotoState(MyStateMachine::getStateMachine()->getCurrentState() + 1);	break;
		case 32: 	break;
		default:	break;
		}
	};

	auto sm = MyStateMachine::getStateMachine();
	sm->gotoState(0);
	w.swapBuffers();

	while (true)
	{
		Window::pollEvents();
	}
}
